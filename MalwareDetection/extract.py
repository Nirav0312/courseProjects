# extract bytecode and save into a file in same folder
import os
import pickle
import numpy as np

if __name__ == "__main__":


    base_path="data//Static_Analysis_RAWDATA"
    benign = "Benign"
    opcode = "Opcodes.txt"
    code_only = "code"

    folders = os.listdir(base_path+"//"+benign)

    folders = sorted(folders)
    i=0

    max_so_far = 0

    for folder in folders:
        file_path = base_path+"//"+benign+"//"+folder+"//"+opcode
        write_into = base_path+"//"+benign+"//"+folder+"//"+code_only

        code = list()

        with open(file_path, 'r') as all_lines:
            code = [ line[9:32].strip().split(" ")[0]
                     for line in all_lines
                        if not(
                            "." in line[9:32].strip() or
                            "<" in line[9:32].strip() or
                            ":" in line[9:32].strip() or
                            ">" in line[9:32].strip() or
                            line[9:32].strip() == ''
                        )
                     ]

            print(i)
            i+=1




